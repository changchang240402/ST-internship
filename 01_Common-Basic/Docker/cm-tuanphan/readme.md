# Dockerized Laravel Project Setup

This guide outlines the process of setting up a Laravel-based project within a Docker environment. The steps below detail   the creation of a Docker container containing a Laravel application, Nginx, Minio, and MySQL.

## Prerequisites

- Make sure you have Composer installed. You can install it by following the instructions at [https://getcomposer.org/](https://getcomposer.org/).

## Getting Started

1. Create a new Laravel project named "laravel" by running the following command:

    ```sh
    composer create-project laravel/laravel
    ```

    Alternatively, if you have an existing Laravel project, ensure that the `.env` file and `composer.json` are available. For example:

    ```sh
    cp .env.example .env
    ```

2. Clone this repository and replace the contents of the "laravel" folder with your own website's content. This repository includes a Laravel 10 framework template, Nginx, Minio, and MySQL configurations.

## Project Structure

The repository consists of the following main files/folders:

### config

Contains configuration files for Nginx, PHP, etc. that are required for the web server to work with Laravel deployment using Nginx. By default, content will be served from the path `var/www/html`.

### laravel

This folder should contain your main web application's source files. It should not include vendor files, as they will be generated by the Dockerfile using the `composer.json` later on.

### docker-compose.yml

This file provides instructions for deploying the existing Dockerfile. It deploys Nginx, PHP, and Composer using a base Alpine Linux image. It also uses various images from Docker Hub to build Minio, MySQL, and Redis services.

### Dockerfile

This file contains instructions that use an Alpine Linux image as a base for the Docker environment. It sets `/var/www/html` as the main working directory and installs PHP dependencies:

```sh
RUN apk add --no-cache \
  curl \
  nginx \
  php82 \
  php82-ctype \
  # ... other PHP extensions ...
  supervisor
```

It also includes commands to load configurations from the `config` folder and install Composer as a PHP package management system:

```sh
# Configure nginx - http
COPY config/nginx.conf /etc/nginx/nginx.conf
# Configure nginx - default server
COPY config/conf.d /etc/nginx/conf.d/

...

# Install composer
RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/bin --filename=composer 
```

The Dockerfile further ensures that the project runs with normal user privileges to prevent permission-related errors. It installs necessary packages and performs setup tasks:

```sh
# Install dependencies and generate Laravel app key
RUN composer install \
  --optimize-autoloader \
  --no-interaction \
  --no-progress
RUN php artisan key:generate
```

## Deployment

To deploy the Dockerized project, execute the following command within the project's directory:

```sh
docker-compose up -d
```

This command will launch the containers in detached mode, allowing your Laravel application to be accessible via the configured Nginx server.

With these steps, your Laravel-based project should be up and running within a Docker environment, ready for development.
```
