/**
 * Highstock JS v11.2.0 (2023-10-30)
 *
 * Indicator series type for Highcharts Stock
 *
 * (c) 2010-2021 Daniel Studencki
 *
 * License: www.highcharts.com/license
 */!function(e){"object"==typeof module&&module.exports?(e.default=e,module.exports=e):"function"==typeof define&&define.amd?define("highcharts/indicators/keltner-channels",["highcharts","highcharts/modules/stock"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";var t=e?e._modules:{};function i(e,t,i,o){e.hasOwnProperty(t)||(e[t]=o.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}i(t,"Stock/Indicators/MultipleLinesComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,t){var i;let{sma:{prototype:o}}=e.seriesTypes,{defined:s,error:n,merge:r}=t;return function(e){let i=[],a=["bottomLine"],p=["top","bottom"],l=["top"];function h(e){return"plot"+e.charAt(0).toUpperCase()+e.slice(1)}function d(e,t){let i=[];return(e.pointArrayMap||[]).forEach(e=>{e!==t&&i.push(h(e))}),i}function c(){let e=this,t=e.pointValKey,i=e.linesApiNames,a=e.areaLinesNames,p=e.points,l=e.options,c=e.graph,u={options:{gapSize:l.gapSize}},m=[],f=d(e,t),y=p.length,g;if(f.forEach((e,t)=>{for(m[t]=[];y--;)g=p[y],m[t].push({x:g.x,plotX:g.plotX,plotY:g[e],isNull:!s(g[e])});y=p.length}),e.userOptions.fillColor&&a.length){let t=f.indexOf(h(a[0])),i=m[t],s=1===a.length?p:m[f.indexOf(h(a[1]))],n=e.color;e.points=s,e.nextPoints=i,e.color=e.userOptions.fillColor,e.options=r(p,u),e.graph=e.area,e.fillGraph=!0,o.drawGraph.call(e),e.area=e.graph,delete e.nextPoints,delete e.fillGraph,e.color=n}i.forEach((t,i)=>{m[i]?(e.points=m[i],l[t]?e.options=r(l[t].styles,u):n('Error: "There is no '+t+' in DOCS options declared. Check if linesApiNames are consistent with your DOCS line names."'),e.graph=e["graph"+t],o.drawGraph.call(e),e["graph"+t]=e.graph):n('Error: "'+t+" doesn't have equivalent in pointArrayMap. To many elements in linesApiNames relative to pointArrayMap.\"")}),e.points=p,e.options=l,e.graph=c,o.drawGraph.call(e)}function u(e){let t,i=[],s=[];if(e=e||this.points,this.fillGraph&&this.nextPoints){if((t=o.getGraphPath.call(this,this.nextPoints))&&t.length){t[0][0]="L",i=o.getGraphPath.call(this,e),s=t.slice(0,i.length);for(let e=s.length-1;e>=0;e--)i.push(s[e])}}else i=o.getGraphPath.apply(this,arguments);return i}function m(e){let t=[];return(this.pointArrayMap||[]).forEach(i=>{t.push(e[i])}),t}function f(){let e=this.pointArrayMap,t=[],i;t=d(this),o.translate.apply(this,arguments),this.points.forEach(o=>{e.forEach((e,s)=>{i=o[e],this.dataModify&&(i=this.dataModify.modifyValue(i)),null!==i&&(o[t[s]]=this.yAxis.toPixels(i,!0))})})}e.compose=function(e){if(t.pushUnique(i,e)){let t=e.prototype;t.linesApiNames=t.linesApiNames||a.slice(),t.pointArrayMap=t.pointArrayMap||p.slice(),t.pointValKey=t.pointValKey||"top",t.areaLinesNames=t.areaLinesNames||l.slice(),t.drawGraph=c,t.getGraphPath=u,t.toYData=m,t.translate=f}return e}}(i||(i={})),i}),i(t,"Stock/Indicators/KeltnerChannels/KeltnerChannelsIndicator.js",[t["Stock/Indicators/MultipleLinesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,t,i){let{sma:o}=t.seriesTypes,{correctFloat:s,extend:n,merge:r}=i;class a extends o{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0}init(){t.seriesTypes.sma.prototype.init.apply(this,arguments),this.options=r({topLine:{styles:{lineColor:this.color}},bottomLine:{styles:{lineColor:this.color}}},this.options)}getValues(e,i){let o,n,r,a,p,l,h;let d=i.period,c=i.periodATR,u=i.multiplierATR,m=i.index,f=e.yData,y=f?f.length:0,g=[],C=t.seriesTypes.ema.prototype.getValues(e,{period:d,index:m}),A=t.seriesTypes.atr.prototype.getValues(e,{period:c}),v=[],x=[];if(!(y<d)){for(h=d;h<=y;h++)p=C.values[h-d],l=A.values[h-c],a=p[0],n=s(p[1]+u*l[1]),r=s(p[1]-u*l[1]),o=p[1],g.push([a,n,o,r]),v.push(a),x.push([n,o,r]);return{values:g,xData:v,yData:x}}}}return a.defaultOptions=r(o.defaultOptions,{params:{index:0,period:20,periodATR:10,multiplierATR:2},bottomLine:{styles:{lineWidth:1,lineColor:void 0}},topLine:{styles:{lineWidth:1,lineColor:void 0}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span><b> {series.name}</b><br/>Upper Channel: {point.top}<br/>EMA({series.options.params.period}): {point.middle}<br/>Lower Channel: {point.bottom}<br/>'},marker:{enabled:!1},dataGrouping:{approximation:"averages"},lineWidth:1}),n(a.prototype,{nameBase:"Keltner Channels",areaLinesNames:["top","bottom"],nameComponents:["period","periodATR","multiplierATR"],linesApiNames:["topLine","bottomLine"],pointArrayMap:["top","middle","bottom"],pointValKey:"middle"}),e.compose(a),t.registerSeriesType("keltnerchannels",a),a}),i(t,"masters/indicators/keltner-channels.src.js",[],function(){})});//# sourceMappingURL=keltner-channels.js.map