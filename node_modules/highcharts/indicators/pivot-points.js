/**
 * Highstock JS v11.2.0 (2023-10-30)
 *
 * Indicator series type for Highcharts Stock
 *
 * (c) 2010-2021 Pawe≈Ç Fus
 *
 * License: www.highcharts.com/license
 */!function(t){"object"==typeof module&&module.exports?(t.default=t,module.exports=t):"function"==typeof define&&define.amd?define("highcharts/indicators/pivot-points",["highcharts","highcharts/modules/stock"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";var e=t?t._modules:{};function o(t,e,o,a){t.hasOwnProperty(e)||(t[e]=a.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}o(e,"Stock/Indicators/PivotPoints/PivotPointsPoint.js",[e["Core/Series/SeriesRegistry.js"]],function(t){let e=t.seriesTypes.sma.prototype.pointClass;function o(e,o){let a=e.series.pointArrayMap,i,n=a.length;for(t.seriesTypes.sma.prototype.pointClass.prototype[o].call(e);n--;)e[i="dataLabel"+a[n]]&&e[i].element&&e[i].destroy(),e[i]=null}return class extends e{constructor(){super(...arguments),this.P=void 0,this.pivotLine=void 0,this.series=void 0}destroyElements(){o(this,"destroyElements")}destroy(){o(this,"destroyElements")}}}),o(e,"Stock/Indicators/PivotPoints/PivotPointsIndicator.js",[e["Stock/Indicators/PivotPoints/PivotPointsPoint.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(t,e,o){let{sma:a}=e.seriesTypes,{merge:i,extend:n,defined:s,isArray:l}=o;class r extends a{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0,this.endPoint=void 0,this.plotEndPoint=void 0}toYData(t){return[t.P]}translate(){let t=this;super.translate.apply(t),t.points.forEach(function(e){t.pointArrayMap.forEach(function(o){s(e[o])&&(e["plot"+o]=t.yAxis.toPixels(e[o],!0))})}),t.plotEndPoint=t.xAxis.toPixels(t.endPoint,!0)}getGraphPath(t){let e=this,o=[[],[],[],[],[],[],[],[],[]],a=e.pointArrayMap.length,i=e.plotEndPoint,n=[],l,r,p=t.length,d;for(;p--;){for(d=0,r=t[p];d<a;d++)s(r[l=e.pointArrayMap[d]])&&o[d].push({plotX:r.plotX,plotY:r["plot"+l],isNull:!1},{plotX:i,plotY:r["plot"+l],isNull:!1},{plotX:i,plotY:null,isNull:!0});i=r.plotX}return o.forEach(t=>{n=n.concat(super.getGraphPath.call(e,t))}),n}drawDataLabels(){let t,e,o,a;let i=this,n=i.pointArrayMap;i.options.dataLabels.enabled&&(e=i.points.length,n.concat([!1]).forEach((s,l)=>{for(a=e;a--;)o=i.points[a],s?(o.y=o[s],o.pivotLine=s,o.plotY=o["plot"+s],t=o["dataLabel"+s],l&&(o["dataLabel"+n[l-1]]=o.dataLabel),o.dataLabels||(o.dataLabels=[]),o.dataLabels[0]=o.dataLabel=t=t&&t.element?t:null):o["dataLabel"+n[l-1]]=o.dataLabel;super.drawDataLabels.call(i)}))}getValues(t,e){let o,a,i,n,s,r,p;let d=e.period,c=t.xData,u=t.yData,h=u?u.length:0,f=this[e.algorithm+"Placement"],P=[],y=[],m=[];if(!(c.length<d)&&l(u[0])&&4===u[0].length){for(p=d+1;p<=h+d;p+=d)i=c.slice(p-d-1,p),n=u.slice(p-d-1,p),a=i.length,o=i[a-1],r=f(this.getPivotAndHLC(n)),s=P.push([o].concat(r)),y.push(o),m.push(P[s-1].slice(1));return this.endPoint=i[0]+(o-i[0])/a*d,{values:P,xData:y,yData:m}}}getPivotAndHLC(t){let e=t[t.length-1][3],o=-1/0,a=1/0;t.forEach(function(t){o=Math.max(o,t[1]),a=Math.min(a,t[2])});let i=(o+a+e)/3;return[i,o,a,e]}standardPlacement(t){let e=t[1]-t[2],o=[null,null,t[0]+e,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-e,null,null];return o}camarillaPlacement(t){let e=t[1]-t[2],o=[t[3]+1.5*e,t[3]+1.25*e,t[3]+1.1666*e,t[3]+1.0833*e,t[0],t[3]-1.0833*e,t[3]-1.1666*e,t[3]-1.25*e,t[3]-1.5*e];return o}fibonacciPlacement(t){let e=t[1]-t[2],o=[null,t[0]+e,t[0]+.618*e,t[0]+.382*e,t[0],t[0]-.382*e,t[0]-.618*e,t[0]-e,null];return o}}return r.defaultOptions=i(a.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}}),n(r.prototype,{nameBase:"Pivot Points",pointArrayMap:["R4","R3","R2","R1","P","S1","S2","S3","S4"],pointValKey:"P",pointClass:t}),e.registerSeriesType("pivotpoints",r),r}),o(e,"masters/indicators/pivot-points.src.js",[],function(){})});//# sourceMappingURL=pivot-points.js.map