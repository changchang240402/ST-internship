/**
 * Highstock JS v11.2.0 (2023-10-30)
 *
 * Indicator series type for Highcharts Stock
 *
 * (c) 2010-2021 Wojciech Chmiel
 *
 * License: www.highcharts.com/license
 */!function(o){"object"==typeof module&&module.exports?(o.default=o,module.exports=o):"function"==typeof define&&define.amd?define("highcharts/indicators/supertrend",["highcharts","highcharts/modules/stock"],function(e){return o(e),o.Highcharts=e,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){"use strict";var e=o?o._modules:{};function t(o,e,t,r){o.hasOwnProperty(e)||(o[e]=r.apply(null,t),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:o[e]}})))}t(e,"Stock/Indicators/Supertrend/SupertrendIndicator.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"],e["Core/Chart/StockChart.js"]],function(o,e,t){let{atr:r,sma:i}=o.seriesTypes,{addEvent:n,correctFloat:l,isArray:s,extend:a,merge:p,objectEach:d}=e;function h(o,e,t){return{index:e,close:o.yData[e][t],x:o.xData[e]}}class c extends i{constructor(){super(...arguments),this.data=void 0,this.linkedParent=void 0,this.options=void 0,this.points=void 0}init(){let o=this;super.init.apply(o,arguments);let e=n(t,"afterLinkSeries",()=>{if(o.options){let e=o.options,t=o.linkedParent.options;e.cropThreshold=t.cropThreshold-(e.params.period-1)}e()},{order:1})}drawGraph(){let o=this,e=o.options,t=o.linkedParent,r=t?t.points:[],n=o.points,l=o.graph,s=r.length-n.length,a=s>0?s:0,c={options:{gapSize:e.gapSize}},u={top:[],bottom:[],intersect:[]},g={top:{styles:{lineWidth:e.lineWidth,lineColor:e.fallingTrendColor||e.color,dashStyle:e.dashStyle}},bottom:{styles:{lineWidth:e.lineWidth,lineColor:e.risingTrendColor||e.color,dashStyle:e.dashStyle}},intersect:e.changeTrendLine},y,f,x,m,C,T,S,D,v,b=n.length;for(;b--;)y=n[b],f=n[b-1],x=r[b-1+a],m=r[b-2+a],C=r[b+a],T=r[b+a+1],S=y.options.color,D={x:y.x,plotX:y.plotX,plotY:y.plotY,isNull:!1},!m&&x&&t.yData[x.index-1]&&(m=h(t,x.index-1,3)),!T&&C&&t.yData[C.index+1]&&(T=h(t,C.index+1,3)),!x&&m&&t.yData[m.index+1]?x=h(t,m.index+1,3):!x&&C&&t.yData[C.index-1]&&(x=h(t,C.index-1,3)),y&&x&&C&&m&&y.x!==x.x&&(y.x===C.x?(m=x,x=C):y.x===m.x?(x=m,m={close:t.yData[x.index-1][3],x:t.xData[x.index-1]}):T&&y.x===T.x&&(x=T,m=C)),f&&m&&x?(v={x:f.x,plotX:f.plotX,plotY:f.plotY,isNull:!1},y.y>=x.close&&f.y>=m.close?(y.color=S||e.fallingTrendColor||e.color,u.top.push(D)):y.y<x.close&&f.y<m.close?(y.color=S||e.risingTrendColor||e.color,u.bottom.push(D)):(u.intersect.push(D),u.intersect.push(v),u.intersect.push(p(v,{isNull:!0})),y.y>=x.close&&f.y<m.close?(y.color=S||e.fallingTrendColor||e.color,f.color=S||e.risingTrendColor||e.color,u.top.push(D),u.top.push(p(v,{isNull:!0}))):y.y<x.close&&f.y>=m.close&&(y.color=S||e.risingTrendColor||e.color,f.color=S||e.fallingTrendColor||e.color,u.bottom.push(D),u.bottom.push(p(v,{isNull:!0}))))):x&&(y.y>=x.close?(y.color=S||e.fallingTrendColor||e.color,u.top.push(D)):(y.color=S||e.risingTrendColor||e.color,u.bottom.push(D)));d(u,function(e,t){o.points=e,o.options=p(g[t].styles,c),o.graph=o["graph"+t+"Line"],i.prototype.drawGraph.call(o),o["graph"+t+"Line"]=o.graph}),o.points=n,o.options=e,o.graph=l}getValues(o,e){let t=e.period,i=e.multiplier,n=o.xData,a=o.yData,p=[],d=[],h=[],c=0===t?0:t-1,u=[],g=[],y=[],f,x,m,C,T,S,D,v,b;if(!(n.length<=t)&&s(a[0])&&4===a[0].length&&!(t<0)){for(b=0,y=r.prototype.getValues.call(this,o,{period:t}).yData;b<y.length;b++)v=a[c+b],D=a[c+b-1]||[],C=u[b-1],T=g[b-1],S=h[b-1],0===b&&(C=T=S=0),f=l((v[1]+v[2])/2+i*y[b]),x=l((v[1]+v[2])/2-i*y[b]),f<C||D[3]>C?u[b]=f:u[b]=C,x>T||D[3]<T?g[b]=x:g[b]=T,S===C&&v[3]<u[b]||S===T&&v[3]<g[b]?m=u[b]:(S===C&&v[3]>u[b]||S===T&&v[3]>g[b])&&(m=g[b]),p.push([n[c+b],m]),d.push(n[c+b]),h.push(m);return{values:p,xData:d,yData:h}}}}return c.defaultOptions=p(i.defaultOptions,{params:{index:void 0,multiplier:3,period:10},risingTrendColor:"#06b535",fallingTrendColor:"#f21313",changeTrendLine:{styles:{lineWidth:1,lineColor:"#333333",dashStyle:"LongDash"}}}),a(c.prototype,{nameBase:"Supertrend",nameComponents:["multiplier","period"]}),o.registerSeriesType("supertrend",c),c}),t(e,"masters/indicators/supertrend.src.js",[],function(){})});//# sourceMappingURL=supertrend.js.map