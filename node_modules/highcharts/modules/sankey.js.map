{"version":3,"sources":["<anon>"],"sourcesContent":["/**\n * @license Highcharts JS v11.2.0 (2023-10-30)\n *\n * Sankey diagram module\n *\n * (c) 2010-2021 Torstein Honsi\n *\n * License: www.highcharts.com/license\n */\n(function (factory) {\n    if (typeof module === 'object' && module.exports) {\n        factory['default'] = factory;\n        module.exports = factory;\n    } else if (typeof define === 'function' && define.amd) {\n        define('highcharts/modules/sankey', ['highcharts'], function (Highcharts) {\n            factory(Highcharts);\n            factory.Highcharts = Highcharts;\n            return factory;\n        });\n    } else {\n        factory(typeof Highcharts !== 'undefined' ? Highcharts : undefined);\n    }\n}(function (Highcharts) {\n    'use strict';\n    var _modules = Highcharts ? Highcharts._modules : {};\n    function _registerModule(obj, path, args, fn) {\n        if (!obj.hasOwnProperty(path)) {\n            obj[path] = fn.apply(null, args);\n\n            if (typeof CustomEvent === 'function') {\n                window.dispatchEvent(new CustomEvent(\n                    'HighchartsModuleLoaded',\n                    { detail: { path: path, module: obj[path] } }\n                ));\n            }\n        }\n    }\n    _registerModule(_modules, 'Series/NodesComposition.js', [_modules['Core/Series/SeriesRegistry.js'], _modules['Core/Utilities.js']], function (SeriesRegistry, U) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { series: { prototype: seriesProto, prototype: { pointClass: { prototype: pointProto } } } } = SeriesRegistry;\n        const { defined, extend, find, merge, pick } = U;\n        /* *\n         *\n         *  Composition\n         *\n         * */\n        var NodesComposition;\n        (function (NodesComposition) {\n            /* *\n             *\n             *  Declarations\n             *\n             * */\n            /* *\n             *\n             *  Constants\n             *\n             * */\n            const composedMembers = [];\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            function compose(PointClass, SeriesClass) {\n                if (U.pushUnique(composedMembers, PointClass)) {\n                    const pointProto = PointClass.prototype;\n                    pointProto.setNodeState = setNodeState;\n                    pointProto.setState = setNodeState;\n                    pointProto.update = updateNode;\n                }\n                if (U.pushUnique(composedMembers, SeriesClass)) {\n                    const seriesProto = SeriesClass.prototype;\n                    seriesProto.destroy = destroy;\n                    seriesProto.setData = setData;\n                }\n                return SeriesClass;\n            }\n            NodesComposition.compose = compose;\n            /**\n             * Create a single node that holds information on incoming and outgoing\n             * links.\n             * @private\n             */\n            function createNode(id) {\n                const PointClass = this.pointClass, findById = (nodes, id) => find(nodes, (node) => node.id === id);\n                let node = findById(this.nodes, id), options;\n                if (!node) {\n                    options = this.options.nodes && findById(this.options.nodes, id);\n                    const newNode = (new PointClass()).init(this, extend({\n                        className: 'highcharts-node',\n                        isNode: true,\n                        id: id,\n                        y: 1 // Pass isNull test\n                    }, options));\n                    newNode.linksTo = [];\n                    newNode.linksFrom = [];\n                    /**\n                     * Return the largest sum of either the incoming or outgoing links.\n                     * @private\n                     */\n                    newNode.getSum = function () {\n                        let sumTo = 0, sumFrom = 0;\n                        newNode.linksTo.forEach((link) => {\n                            sumTo += link.weight || 0;\n                        });\n                        newNode.linksFrom.forEach((link) => {\n                            sumFrom += link.weight || 0;\n                        });\n                        return Math.max(sumTo, sumFrom);\n                    };\n                    /**\n                     * Get the offset in weight values of a point/link.\n                     * @private\n                     */\n                    newNode.offset = function (point, coll) {\n                        let offset = 0;\n                        for (let i = 0; i < newNode[coll].length; i++) {\n                            if (newNode[coll][i] === point) {\n                                return offset;\n                            }\n                            offset += newNode[coll][i].weight;\n                        }\n                    };\n                    // Return true if the node has a shape, otherwise all links are\n                    // outgoing.\n                    newNode.hasShape = function () {\n                        let outgoing = 0;\n                        newNode.linksTo.forEach((link) => {\n                            if (link.outgoing) {\n                                outgoing++;\n                            }\n                        });\n                        return (!newNode.linksTo.length ||\n                            outgoing !== newNode.linksTo.length);\n                    };\n                    newNode.index = this.nodes.push(newNode) - 1;\n                    node = newNode;\n                }\n                node.formatPrefix = 'node';\n                // for use in formats\n                node.name = node.name || node.options.id || '';\n                // Mass is used in networkgraph:\n                node.mass = pick(\n                // Node:\n                node.options.mass, node.options.marker && node.options.marker.radius, \n                // Series:\n                this.options.marker && this.options.marker.radius, \n                // Default:\n                4);\n                return node;\n            }\n            NodesComposition.createNode = createNode;\n            /**\n             * Destroy alll nodes and links.\n             * @private\n             */\n            function destroy() {\n                // Nodes must also be destroyed (#8682, #9300)\n                this.data = []\n                    .concat(this.points || [], this.nodes);\n                return seriesProto.destroy.apply(this, arguments);\n            }\n            NodesComposition.destroy = destroy;\n            /**\n             * Extend generatePoints by adding the nodes, which are Point objects but\n             * pushed to the this.nodes array.\n             * @private\n             */\n            function generatePoints() {\n                const chart = this.chart, nodeLookup = {};\n                seriesProto.generatePoints.call(this);\n                if (!this.nodes) {\n                    this.nodes = []; // List of Point-like node items\n                }\n                this.colorCounter = 0;\n                // Reset links from previous run\n                this.nodes.forEach((node) => {\n                    node.linksFrom.length = 0;\n                    node.linksTo.length = 0;\n                    node.level = node.options.level;\n                });\n                // Create the node list and set up links\n                this.points.forEach((point) => {\n                    if (defined(point.from)) {\n                        if (!nodeLookup[point.from]) {\n                            nodeLookup[point.from] = this.createNode(point.from);\n                        }\n                        nodeLookup[point.from].linksFrom.push(point);\n                        point.fromNode = nodeLookup[point.from];\n                        // Point color defaults to the fromNode's color\n                        if (chart.styledMode) {\n                            point.colorIndex = pick(point.options.colorIndex, nodeLookup[point.from].colorIndex);\n                        }\n                        else {\n                            point.color =\n                                point.options.color || nodeLookup[point.from].color;\n                        }\n                    }\n                    if (defined(point.to)) {\n                        if (!nodeLookup[point.to]) {\n                            nodeLookup[point.to] = this.createNode(point.to);\n                        }\n                        nodeLookup[point.to].linksTo.push(point);\n                        point.toNode = nodeLookup[point.to];\n                    }\n                    point.name = point.name || point.id; // for use in formats\n                }, this);\n                // Store lookup table for later use\n                this.nodeLookup = nodeLookup;\n            }\n            NodesComposition.generatePoints = generatePoints;\n            /**\n             * Destroy all nodes on setting new data\n             * @private\n             */\n            function setData() {\n                if (this.nodes) {\n                    this.nodes.forEach((node) => {\n                        node.destroy();\n                    });\n                    this.nodes.length = 0;\n                }\n                seriesProto.setData.apply(this, arguments);\n            }\n            /**\n             * When hovering node, highlight all connected links. When hovering a link,\n             * highlight all connected nodes.\n             * @private\n             */\n            function setNodeState(state) {\n                const args = arguments, others = this.isNode ? this.linksTo.concat(this.linksFrom) :\n                    [this.fromNode, this.toNode];\n                if (state !== 'select') {\n                    others.forEach((linkOrNode) => {\n                        if (linkOrNode && linkOrNode.series) {\n                            pointProto.setState.apply(linkOrNode, args);\n                            if (!linkOrNode.isNode) {\n                                if (linkOrNode.fromNode.graphic) {\n                                    pointProto.setState.apply(linkOrNode.fromNode, args);\n                                }\n                                if (linkOrNode.toNode && linkOrNode.toNode.graphic) {\n                                    pointProto.setState.apply(linkOrNode.toNode, args);\n                                }\n                            }\n                        }\n                    });\n                }\n                pointProto.setState.apply(this, args);\n            }\n            NodesComposition.setNodeState = setNodeState;\n            /**\n             * When updating a node, don't update `series.options.data`, but\n             * `series.options.nodes`\n             * @private\n             */\n            function updateNode(options, redraw, animation, runEvent) {\n                const nodes = this.series.options.nodes, data = this.series.options.data, dataLength = data && data.length || 0, linkConfig = data && data[this.index];\n                pointProto.update.call(this, options, this.isNode ? false : redraw, // Hold the redraw for nodes\n                animation, runEvent);\n                if (this.isNode) {\n                    // this.index refers to `series.nodes`, not `options.nodes` array\n                    const nodeIndex = (nodes || [])\n                        .reduce(// Array.findIndex needs a polyfill\n                    (prevIndex, n, index) => (this.id === n.id ? index : prevIndex), -1), \n                    // Merge old config with new config. New config is stored in\n                    // options.data, because of default logic in point.update()\n                    nodeConfig = merge(nodes && nodes[nodeIndex] || {}, data && data[this.index] || {});\n                    // Restore link config\n                    if (data) {\n                        if (linkConfig) {\n                            data[this.index] = linkConfig;\n                        }\n                        else {\n                            // Remove node from config if there's more nodes than links\n                            data.length = dataLength;\n                        }\n                    }\n                    // Set node config\n                    if (nodes) {\n                        if (nodeIndex >= 0) {\n                            nodes[nodeIndex] = nodeConfig;\n                        }\n                        else {\n                            nodes.push(nodeConfig);\n                        }\n                    }\n                    else {\n                        this.series.options.nodes = [nodeConfig];\n                    }\n                    if (pick(redraw, true)) {\n                        this.series.chart.redraw(animation);\n                    }\n                }\n            }\n            NodesComposition.updateNode = updateNode;\n        })(NodesComposition || (NodesComposition = {}));\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return NodesComposition;\n    });\n    _registerModule(_modules, 'Series/Sankey/SankeyPoint.js', [_modules['Core/Series/Point.js'], _modules['Core/Series/SeriesRegistry.js'], _modules['Core/Utilities.js']], function (Point, SeriesRegistry, U) {\n        /* *\n         *\n         *  Sankey diagram module\n         *\n         *  (c) 2010-2021 Torstein Honsi\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { column: ColumnSeries } = SeriesRegistry.seriesTypes;\n        const { defined } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        class SankeyPoint extends ColumnSeries.prototype.pointClass {\n            constructor() {\n                /* *\n                 *\n                 *  Properties\n                 *\n                 * */\n                super(...arguments);\n                this.className = void 0;\n                this.fromNode = void 0;\n                this.level = void 0;\n                this.linkBase = void 0;\n                this.linkColorMode = void 0;\n                this.linksFrom = void 0;\n                this.linksTo = void 0;\n                this.mass = void 0;\n                this.nodeX = void 0;\n                this.nodeY = void 0;\n                this.options = void 0;\n                this.series = void 0;\n                this.toNode = void 0;\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            applyOptions(options, x) {\n                Point.prototype.applyOptions.call(this, options, x);\n                // Treat point.level as a synonym of point.column\n                if (defined(this.options.level)) {\n                    this.options.column = this.column = this.options.level;\n                }\n                return this;\n            }\n            /**\n             * @private\n             */\n            getClassName() {\n                return (this.isNode ? 'highcharts-node ' : 'highcharts-link ') +\n                    Point.prototype.getClassName.call(this);\n            }\n            /**\n             * If there are incoming links, place it to the right of the\n             * highest order column that links to this one.\n             *\n             * @private\n             */\n            getFromNode() {\n                const node = this;\n                let fromColumn = -1, fromNode;\n                for (let i = 0; i < node.linksTo.length; i++) {\n                    const point = node.linksTo[i];\n                    if (point.fromNode.column > fromColumn &&\n                        point.fromNode !== node // #16080\n                    ) {\n                        fromNode = point.fromNode;\n                        fromColumn = fromNode.column;\n                    }\n                }\n                return { fromNode, fromColumn };\n            }\n            /**\n             * Calculate node.column if it's not set by user\n             * @private\n             */\n            setNodeColumn() {\n                const node = this;\n                if (!defined(node.options.column)) {\n                    // No links to this node, place it left\n                    if (node.linksTo.length === 0) {\n                        node.column = 0;\n                    }\n                    else {\n                        node.column = node.getFromNode().fromColumn + 1;\n                    }\n                }\n            }\n            /**\n             * @private\n             */\n            isValid() {\n                return this.isNode || typeof this.weight === 'number';\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return SankeyPoint;\n    });\n    _registerModule(_modules, 'Series/Sankey/SankeySeriesDefaults.js', [], function () {\n        /* *\n         *\n         *  Sankey diagram module\n         *\n         *  (c) 2010-2021 Torstein Honsi\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        /* *\n         *\n         *  API Options\n         *\n         * */\n        /**\n         * A sankey diagram is a type of flow diagram, in which the width of the\n         * link between two nodes is shown proportionally to the flow quantity.\n         *\n         * @sample highcharts/demo/sankey-diagram/\n         *         Sankey diagram\n         * @sample highcharts/plotoptions/sankey-inverted/\n         *         Inverted sankey diagram\n         * @sample highcharts/plotoptions/sankey-outgoing\n         *         Sankey diagram with outgoing links\n         *\n         * @extends      plotOptions.column\n         * @since        6.0.0\n         * @product      highcharts\n         * @excluding    animationLimit, boostThreshold, borderRadius,\n         *               crisp, cropThreshold, colorAxis, colorKey, depth, dragDrop,\n         *               edgeColor, edgeWidth, findNearestPointBy, grouping,\n         *               groupPadding, groupZPadding, maxPointWidth, negativeColor,\n         *               pointInterval, pointIntervalUnit, pointPadding,\n         *               pointPlacement, pointRange, pointStart, pointWidth,\n         *               shadow, softThreshold, stacking, threshold, zoneAxis,\n         *               zones, minPointLength, dataSorting, boostBlending\n         * @requires     modules/sankey\n         * @optionparent plotOptions.sankey\n         *\n         * @private\n         */\n        const SankeySeriesDefaults = {\n            borderWidth: 0,\n            colorByPoint: true,\n            /**\n             * Higher numbers makes the links in a sankey diagram or dependency\n             * wheelrender more curved. A `curveFactor` of 0 makes the lines\n             * straight.\n             *\n             * @private\n             */\n            curveFactor: 0.33,\n            /**\n             * Options for the data labels appearing on top of the nodes and links.\n             * For sankey charts, data labels are visible for the nodes by default,\n             * but hidden for links. This is controlled by modifying the\n             * `nodeFormat`, and the `format` that applies to links and is an empty\n             * string by default.\n             *\n             * @declare Highcharts.SeriesSankeyDataLabelsOptionsObject\n             *\n             * @private\n             */\n            dataLabels: {\n                enabled: true,\n                backgroundColor: 'none',\n                crop: false,\n                /**\n                 * The\n                 * [format string](https://www.highcharts.com/docs/chart-concepts/labels-and-string-formatting)\n                 * specifying what to show for _nodes_ in the sankey diagram. By\n                 * default the `nodeFormatter` returns `{point.name}`.\n                 *\n                 * @sample highcharts/plotoptions/sankey-link-datalabels/\n                 *         Node and link data labels\n                 *\n                 * @type {string}\n                 */\n                nodeFormat: void 0,\n                /**\n                 * Callback to format data labels for _nodes_ in the sankey diagram.\n                 * The `nodeFormat` option takes precedence over the\n                 * `nodeFormatter`.\n                 *\n                 * @type  {Highcharts.SeriesSankeyDataLabelsFormatterCallbackFunction}\n                 * @since 6.0.2\n                 */\n                nodeFormatter: function () {\n                    return this.point.name;\n                },\n                format: void 0,\n                /**\n                 * @type {Highcharts.SeriesSankeyDataLabelsFormatterCallbackFunction}\n                 */\n                formatter: function () {\n                    return;\n                },\n                inside: true\n            },\n            /**\n             * @default   true\n             * @extends   plotOptions.series.inactiveOtherPoints\n             * @private\n             */\n            inactiveOtherPoints: true,\n            /**\n             * Set options on specific levels. Takes precedence over series options,\n             * but not node and link options.\n             *\n             * @sample highcharts/demo/sunburst\n             *         Sunburst chart\n             *\n             * @type      {Array<*>}\n             * @since     7.1.0\n             * @apioption plotOptions.sankey.levels\n             */\n            /**\n             * Can set `borderColor` on all nodes which lay on the same level.\n             *\n             * @type      {Highcharts.ColorString}\n             * @apioption plotOptions.sankey.levels.borderColor\n             */\n            /**\n             * Can set `borderWidth` on all nodes which lay on the same level.\n             *\n             * @type      {number}\n             * @apioption plotOptions.sankey.levels.borderWidth\n             */\n            /**\n             * Can set `color` on all nodes which lay on the same level.\n             *\n             * @type      {Highcharts.ColorString|Highcharts.GradientColorObject|Highcharts.PatternObject}\n             * @apioption plotOptions.sankey.levels.color\n             */\n            /**\n             * Can set `colorByPoint` on all nodes which lay on the same level.\n             *\n             * @type      {boolean}\n             * @default   true\n             * @apioption plotOptions.sankey.levels.colorByPoint\n             */\n            /**\n             * Can set `dataLabels` on all points which lay on the same level.\n             *\n             * @extends   plotOptions.sankey.dataLabels\n             * @apioption plotOptions.sankey.levels.dataLabels\n             */\n            /**\n             * Decides which level takes effect from the options set in the levels\n             * object.\n             *\n             * @type      {number}\n             * @apioption plotOptions.sankey.levels.level\n             */\n            /**\n             * Can set `linkOpacity` on all points which lay on the same level.\n             *\n             * @type      {number}\n             * @default   0.5\n             * @apioption plotOptions.sankey.levels.linkOpacity\n             */\n            /**\n             * Can set `states` on all nodes and points which lay on the same level.\n             *\n             * @extends   plotOptions.sankey.states\n             * @apioption plotOptions.sankey.levels.states\n             */\n            /**\n             * Determines color mode for sankey links. Available options:\n             *\n             * - `from` color of the sankey link will be the same as the 'from node'\n             *\n             * - `gradient` color of the sankey link will be set to gradient between\n             * colors of 'from node' and 'to node'\n             *\n             * - `to` color of the sankey link will be same as the 'to node'.\n             *\n             * @sample highcharts/demo/vertical-sankey\n             *         Vertical sankey diagram with gradients\n             * @sample highcharts/series-sankey/link-color-mode\n             *         Sankey diagram with gradients and explanation\n             *\n             * @type      {('from'|'gradient'|'to')}\n             * @since     @next\n             */\n            linkColorMode: 'from',\n            /**\n             * Opacity for the links between nodes in the sankey diagram.\n             *\n             * @private\n             */\n            linkOpacity: 0.5,\n            /**\n             * Opacity for the nodes in the sankey diagram.\n             *\n             * @private\n             */\n            opacity: 1,\n            /**\n             * The minimal width for a line of a sankey. By default,\n             * 0 values are not shown.\n             *\n             * @sample highcharts/plotoptions/sankey-minlinkwidth\n             *         Sankey diagram with minimal link height\n             *\n             * @type      {number}\n             * @since     7.1.3\n             * @default   0\n             * @apioption plotOptions.sankey.minLinkWidth\n             *\n             * @private\n             */\n            minLinkWidth: 0,\n            /**\n             * Determines which side of the chart the nodes are to be aligned to. When\n             * the chart is inverted, `top` aligns to the left and `bottom` to the\n             * right.\n             *\n             * @sample highcharts/plotoptions/sankey-nodealignment\n             *         Node alignment demonstrated\n             *\n             * @type      {'top'|'center'|'bottom'}\n             * @apioption plotOptions.sankey.nodeAlignment\n             */\n            nodeAlignment: 'center',\n            /**\n             * The pixel width of each node in a sankey diagram or dependency wheel,\n             * or the height in case the chart is inverted.\n             *\n             * @private\n             */\n            nodeWidth: 20,\n            /**\n             * The padding between nodes in a sankey diagram or dependency wheel, in\n             * pixels.\n             *\n             * If the number of nodes is so great that it is possible to lay them\n             * out within the plot area with the given `nodePadding`, they will be\n             * rendered with a smaller padding as a strategy to avoid overflow.\n             *\n             * @private\n             */\n            nodePadding: 10,\n            showInLegend: false,\n            states: {\n                hover: {\n                    /**\n                     * Opacity for the links between nodes in the sankey diagram in\n                     * hover mode.\n                     */\n                    linkOpacity: 1,\n                    /**\n                     * Opacity for the nodes in the sankey diagram in hover mode.\n                     */\n                    opacity: 1\n                },\n                /**\n                 * The opposite state of a hover for a single point node/link.\n                 *\n                 * @declare Highcharts.SeriesStatesInactiveOptionsObject\n                 */\n                inactive: {\n                    /**\n                     * Opacity for the links between nodes in the sankey diagram in\n                     * inactive mode.\n                     */\n                    linkOpacity: 0.1,\n                    /**\n                     * Opacity of the nodes in the sankey diagram in inactive mode.\n                     */\n                    opacity: 0.1,\n                    /**\n                     * Animation when not hovering over the marker.\n                     *\n                     * @type      {boolean|Partial<Highcharts.AnimationOptionsObject>}\n                     * @apioption plotOptions.series.states.inactive.animation\n                     */\n                    animation: {\n                        /** @internal */\n                        duration: 50\n                    }\n                }\n            },\n            tooltip: {\n                /**\n                 * A callback for defining the format for _nodes_ in the chart's\n                 * tooltip, as opposed to links.\n                 *\n                 * @type      {Highcharts.FormatterCallbackFunction<Highcharts.SankeyNodeObject>}\n                 * @since     6.0.2\n                 * @apioption plotOptions.sankey.tooltip.nodeFormatter\n                 */\n                /**\n                 * Whether the tooltip should follow the pointer or stay fixed on\n                 * the item.\n                 */\n                followPointer: true,\n                headerFormat: '<span style=\"font-size: 0.8em\">{series.name}</span><br/>',\n                pointFormat: '{point.fromNode.name} \\u2192 {point.toNode.name}: <b>{point.weight}</b><br/>',\n                /**\n                 * The\n                 * [format string](https://www.highcharts.com/docs/chart-concepts/labels-and-string-formatting)\n                 * specifying what to show for _nodes_ in tooltip of a diagram\n                 * series, as opposed to links.\n                 */\n                nodeFormat: '{point.name}: <b>{point.sum}</b><br/>'\n            }\n        };\n        /**\n         * A `sankey` series. If the [type](#series.sankey.type) option is not\n         * specified, it is inherited from [chart.type](#chart.type).\n         *\n         * @extends   series,plotOptions.sankey\n         * @excluding animationLimit, boostBlending, boostThreshold, borderColor,\n         *            borderRadius, borderWidth, crisp, cropThreshold, dataParser,\n         *            dataURL, depth, dragDrop, edgeColor, edgeWidth,\n         *            findNearestPointBy, getExtremesFromAll, grouping, groupPadding,\n         *            groupZPadding, label, maxPointWidth, negativeColor, pointInterval,\n         *            pointIntervalUnit, pointPadding, pointPlacement, pointRange,\n         *            pointStart, pointWidth, shadow, softThreshold, stacking,\n         *            threshold, zoneAxis, zones, dataSorting\n         * @product   highcharts\n         * @requires  modules/sankey\n         * @apioption series.sankey\n         */\n        /**\n         * A collection of options for the individual nodes. The nodes in a sankey\n         * diagram are auto-generated instances of `Highcharts.Point`, but options can\n         * be applied here and linked by the `id`.\n         *\n         * @sample highcharts/css/sankey/\n         *         Sankey diagram with node options\n         *\n         * @declare   Highcharts.SeriesSankeyNodesOptionsObject\n         * @type      {Array<*>}\n         * @product   highcharts\n         * @apioption series.sankey.nodes\n         */\n        /**\n         * The id of the auto-generated node, refering to the `from` or `to` setting of\n         * the link.\n         *\n         * @type      {string}\n         * @product   highcharts\n         * @apioption series.sankey.nodes.id\n         */\n        /**\n         * The color of the auto generated node.\n         *\n         * @type      {Highcharts.ColorString|Highcharts.GradientColorObject|Highcharts.PatternObject}\n         * @product   highcharts\n         * @apioption series.sankey.nodes.color\n         */\n        /**\n         * The color index of the auto generated node, especially for use in styled\n         * mode.\n         *\n         * @type      {number}\n         * @product   highcharts\n         * @apioption series.sankey.nodes.colorIndex\n         */\n        /**\n         * An optional column index of where to place the node. The default behaviour is\n         * to place it next to the preceding node. Note that this option name is\n         * counter intuitive in inverted charts, like for example an organization chart\n         * rendered top down. In this case the \"columns\" are horizontal.\n         *\n         * @sample highcharts/plotoptions/sankey-node-column/\n         *         Specified node column\n         *\n         * @type      {number}\n         * @since     6.0.5\n         * @product   highcharts\n         * @apioption series.sankey.nodes.column\n         */\n        /**\n         * Individual data label for each node. The options are the same as\n         * the ones for [series.sankey.dataLabels](#series.sankey.dataLabels).\n         *\n         * @extends   plotOptions.sankey.dataLabels\n         * @apioption series.sankey.nodes.dataLabels\n         */\n        /**\n         * An optional level index of where to place the node. The default behaviour is\n         * to place it next to the preceding node. Alias of `nodes.column`, but in\n         * inverted sankeys and org charts, the levels are laid out as rows.\n         *\n         * @type      {number}\n         * @since     7.1.0\n         * @product   highcharts\n         * @apioption series.sankey.nodes.level\n         */\n        /**\n         * The name to display for the node in data labels and tooltips. Use this when\n         * the name is different from the `id`. Where the id must be unique for each\n         * node, this is not necessary for the name.\n         *\n         * @sample highcharts/css/sankey/\n         *         Sankey diagram with node options\n         *\n         * @type      {string}\n         * @product   highcharts\n         * @apioption series.sankey.nodes.name\n         */\n        /**\n         * This option is deprecated, use\n         * [offsetHorizontal](#series.sankey.nodes.offsetHorizontal) and\n         * [offsetVertical](#series.sankey.nodes.offsetVertical) instead.\n         *\n         * In a horizontal layout, the vertical offset of a node in terms of weight.\n         * Positive values shift the node downwards, negative shift it upwards. In a\n         * vertical layout, like organization chart, the offset is horizontal.\n         *\n         * If a percantage string is given, the node is offset by the percentage of the\n         * node size plus `nodePadding`.\n         *\n         * @deprecated\n         * @type      {number|string}\n         * @default   0\n         * @since     6.0.5\n         * @product   highcharts\n         * @apioption series.sankey.nodes.offset\n         */\n        /**\n         * The horizontal offset of a node. Positive values shift the node right,\n         * negative shift it left.\n         *\n         * If a percantage string is given, the node is offset by the percentage of the\n         * node size.\n         *\n         * @sample highcharts/plotoptions/sankey-node-column/\n         *         Specified node offset\n         *\n         * @type      {number|string}\n         * @since 9.3.0\n         * @product   highcharts\n         * @apioption series.sankey.nodes.offsetHorizontal\n         */\n        /**\n         * The vertical offset of a node. Positive values shift the node down,\n         * negative shift it up.\n         *\n         * If a percantage string is given, the node is offset by the percentage of the\n         * node size.\n         *\n         * @sample highcharts/plotoptions/sankey-node-column/\n         *         Specified node offset\n         *\n         * @type      {number|string}\n         * @since 9.3.0\n         * @product   highcharts\n         * @apioption series.sankey.nodes.offsetVertical\n         */\n        /**\n         * An array of data points for the series. For the `sankey` series type,\n         * points can be given in the following way:\n         *\n         * An array of objects with named values. The following snippet shows only a\n         * few settings, see the complete options set below. If the total number of data\n         * points exceeds the series' [turboThreshold](#series.area.turboThreshold),\n         * this option is not available.\n         *\n         *  ```js\n         *     data: [{\n         *         from: 'Category1',\n         *         to: 'Category2',\n         *         weight: 2\n         *     }, {\n         *         from: 'Category1',\n         *         to: 'Category3',\n         *         weight: 5\n         *     }]\n         *  ```\n         *\n         *  When you provide the data as tuples, the keys option has to be set as well.\n         *\n         *  ```js\n         *     keys: ['from', 'to', 'weight'],\n         *     data: [\n         *         ['Category1', 'Category2', 2],\n         *         ['Category1', 'Category3', 5]\n         *     ]\n         *  ```\n         *\n         * @sample {highcharts} highcharts/series/data-array-of-objects/\n         *         Config objects\n         *\n         * @declare   Highcharts.SeriesSankeyPointOptionsObject\n         * @type      {Array<*>|Array<Array<(string|number)>>}\n         * @extends   series.line.data\n         * @excluding dragDrop, drilldown, marker, x, y\n         * @product   highcharts\n         * @apioption series.sankey.data\n         */\n        /**\n         * The color for the individual _link_. By default, the link color is the same\n         * as the node it extends from. The `series.fillOpacity` option also applies to\n         * the points, so when setting a specific link color, consider setting the\n         * `fillOpacity` to 1.\n         *\n         * @type      {Highcharts.ColorString|Highcharts.GradientColorObject|Highcharts.PatternObject}\n         * @product   highcharts\n         * @apioption series.sankey.data.color\n         */\n        /**\n         * @type      {Highcharts.SeriesSankeyDataLabelsOptionsObject|Array<Highcharts.SeriesSankeyDataLabelsOptionsObject>}\n         * @product   highcharts\n         * @apioption series.sankey.data.dataLabels\n         */\n        /**\n         * The node that the link runs from.\n         *\n         * @type      {string}\n         * @product   highcharts\n         * @apioption series.sankey.data.from\n         */\n        /**\n         * The node that the link runs to.\n         *\n         * @type      {string}\n         * @product   highcharts\n         * @apioption series.sankey.data.to\n         */\n        /**\n         * Whether the link goes out of the system.\n         *\n         * @sample highcharts/plotoptions/sankey-outgoing\n         *         Sankey chart with outgoing links\n         *\n         * @type      {boolean}\n         * @default   false\n         * @product   highcharts\n         * @apioption series.sankey.data.outgoing\n         */\n        /**\n         * The weight of the link.\n         *\n         * @type      {number|null}\n         * @product   highcharts\n         * @apioption series.sankey.data.weight\n         */\n        ''; // adds doclets above to transpiled file\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return SankeySeriesDefaults;\n    });\n    _registerModule(_modules, 'Series/Sankey/SankeyColumnComposition.js', [_modules['Core/Utilities.js']], function (U) {\n        /* *\n         *\n         *  Sankey diagram module\n         *\n         *  (c) 2010-2021 Torstein Honsi\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { defined, pushUnique, relativeLength } = U;\n        /* *\n         *\n         *  Composition\n         *\n         * */\n        var SankeyColumnComposition;\n        (function (SankeyColumnComposition) {\n            /* *\n             *\n             *  Declarations\n             *\n             * */\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * SankeyColumn Composition\n             * @private\n             * @function Highcharts.SankeyColumn#compose\n             *\n             * @param {Array<SankeyPoint>} points\n             * The array of nodes\n             * @param {SankeySeries} series\n             * Series connected to column\n             * @return {ArrayComposition} SankeyColumnArray\n             */\n            function compose(points, series) {\n                const sankeyColumnArray = points;\n                sankeyColumnArray.sankeyColumn =\n                    new SankeyColumnAdditions(sankeyColumnArray, series);\n                return sankeyColumnArray;\n            }\n            SankeyColumnComposition.compose = compose;\n            /* *\n             *\n             *  Classes\n             *\n             * */\n            class SankeyColumnAdditions {\n                /* *\n                 *\n                 *  Constructor\n                 *\n                 * */\n                constructor(points, series) {\n                    this.points = points;\n                    this.series = series;\n                }\n                /* *\n                 *\n                 *  Functions\n                 *\n                 * */\n                /**\n                 * Calculate translation factor used in column and nodes distribution\n                 * @private\n                 * @function Highcharts.SankeyColumn#getTranslationFactor\n                 *\n                 * @param {SankeySeries} series\n                 * The Series\n                 * @return {number} TranslationFactor\n                 * Translation Factor\n                 */\n                getTranslationFactor(series) {\n                    const column = this.points, nodes = column.slice(), chart = series.chart, minLinkWidth = series.options.minLinkWidth || 0;\n                    let skipPoint, factor = 0, i, remainingHeight = ((chart.plotSizeY || 0) -\n                        (series.options.borderWidth || 0) -\n                        (column.length - 1) * series.nodePadding);\n                    // Because the minLinkWidth option doesn't obey the direct\n                    // translation, we need to run translation iteratively, check\n                    // node heights, remove those nodes affected by minLinkWidth,\n                    // check again, etc.\n                    while (column.length) {\n                        factor = remainingHeight / column.sankeyColumn.sum();\n                        skipPoint = false;\n                        i = column.length;\n                        while (i--) {\n                            if (column[i].getSum() * factor < minLinkWidth) {\n                                column.splice(i, 1);\n                                remainingHeight =\n                                    Math.max(0, remainingHeight - minLinkWidth);\n                                skipPoint = true;\n                            }\n                        }\n                        if (!skipPoint) {\n                            break;\n                        }\n                    }\n                    // Re-insert original nodes\n                    column.length = 0;\n                    for (const node of nodes) {\n                        column.push(node);\n                    }\n                    return factor;\n                }\n                /**\n                 * Get the top position of the column in pixels\n                 * @private\n                 * @function Highcharts.SankeyColumn#top\n                 *\n                 * @param {number} factor\n                 * The Translation Factor\n                 * @return {number} top\n                 * The top position of the column\n                 */\n                top(factor) {\n                    const series = this.series, nodePadding = series.nodePadding, height = this.points.reduce((height, node) => {\n                        if (height > 0) {\n                            height += nodePadding;\n                        }\n                        const nodeHeight = Math.max(node.getSum() * factor, series.options.minLinkWidth || 0);\n                        height += nodeHeight;\n                        return height;\n                    }, 0);\n                    // Node alignment option handling #19096\n                    return {\n                        top: 0,\n                        center: 0.5,\n                        bottom: 1\n                    }[series.options.nodeAlignment || 'center'] * ((series.chart.plotSizeY || 0) - height);\n                }\n                /**\n                 * Get the left position of the column in pixels\n                 * @private\n                 * @function Highcharts.SankeyColumn#top\n                 *\n                 * @param {number} factor\n                 * The Translation Factor\n                 * @return {number} left\n                 * The left position of the column\n                 */\n                left(factor) {\n                    const series = this.series, chart = series.chart, equalNodes = series.options.equalNodes, maxNodesLength = (chart.inverted ? chart.plotHeight : chart.plotWidth), nodePadding = series.nodePadding, width = this.points.reduce((width, node) => {\n                        if (width > 0) {\n                            width += nodePadding;\n                        }\n                        const nodeWidth = equalNodes ?\n                            maxNodesLength / node.series.nodes.length -\n                                nodePadding :\n                            Math.max(node.getSum() * factor, series.options.minLinkWidth || 0);\n                        width += nodeWidth;\n                        return width;\n                    }, 0);\n                    return ((chart.plotSizeX || 0) - Math.round(width)) / 2;\n                }\n                /**\n                 * Calculate sum of all nodes inside specific column\n                 * @private\n                 * @function Highcharts.SankeyColumn#sum\n                 *\n                 * @param {ArrayComposition} this\n                 * Sankey Column Array\n                 *\n                 * @return {number} sum\n                 * Sum of all nodes inside column\n                 */\n                sum() {\n                    return this.points.reduce((sum, node) => (sum + node.getSum()), 0);\n                }\n                /**\n                 * Get the offset in pixels of a node inside the column\n                 * @private\n                 * @function Highcharts.SankeyColumn#offset\n                 *\n                 * @param {SankeyPoint} node\n                 * Sankey node\n                 * @param {number} factor\n                 * Translation Factor\n                 * @return {number} offset\n                 * Offset of a node inside column\n                 */\n                offset(node, factor) {\n                    const column = this.points, series = this.series, nodePadding = series.nodePadding;\n                    let offset = 0, totalNodeOffset;\n                    if (series.is('organization') && node.hangsFrom) {\n                        return {\n                            absoluteTop: node.hangsFrom.nodeY\n                        };\n                    }\n                    for (let i = 0; i < column.length; i++) {\n                        const sum = column[i].getSum();\n                        const height = Math.max(sum * factor, series.options.minLinkWidth || 0);\n                        const directionOffset = node.options[series.chart.inverted ?\n                            'offsetHorizontal' :\n                            'offsetVertical'], optionOffset = node.options.offset || 0;\n                        if (sum) {\n                            totalNodeOffset = height + nodePadding;\n                        }\n                        else {\n                            // If node sum equals 0 nodePadding is missed #12453\n                            totalNodeOffset = 0;\n                        }\n                        if (column[i] === node) {\n                            return {\n                                relativeTop: offset + (defined(directionOffset) ?\n                                    // directionOffset is a percent\n                                    // of the node height\n                                    relativeLength(directionOffset, height) :\n                                    relativeLength(optionOffset, totalNodeOffset))\n                            };\n                        }\n                        offset += totalNodeOffset;\n                    }\n                }\n            }\n            SankeyColumnComposition.SankeyColumnAdditions = SankeyColumnAdditions;\n        })(SankeyColumnComposition || (SankeyColumnComposition = {}));\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return SankeyColumnComposition;\n    });\n    _registerModule(_modules, 'Series/TreeUtilities.js', [_modules['Core/Color/Color.js'], _modules['Core/Utilities.js']], function (Color, U) {\n        /* *\n         *\n         *  (c) 2014-2021 Highsoft AS\n         *\n         *  Authors: Jon Arild Nygard / Oystein Moseng\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { extend, isArray, isNumber, isObject, merge, pick } = U;\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /* eslint-disable valid-jsdoc */\n        /**\n         * @private\n         */\n        function getColor(node, options) {\n            const index = options.index, mapOptionsToLevel = options.mapOptionsToLevel, parentColor = options.parentColor, parentColorIndex = options.parentColorIndex, series = options.series, colors = options.colors, siblings = options.siblings, points = series.points, chartOptionsChart = series.chart.options.chart;\n            let getColorByPoint, point, level, colorByPoint, colorIndexByPoint, color, colorIndex;\n            /**\n             * @private\n             */\n            const variateColor = (color) => {\n                const colorVariation = level && level.colorVariation;\n                if (colorVariation &&\n                    colorVariation.key === 'brightness' &&\n                    index &&\n                    siblings) {\n                    return Color.parse(color).brighten(colorVariation.to * (index / siblings)).get();\n                }\n                return color;\n            };\n            if (node) {\n                point = points[node.i];\n                level = mapOptionsToLevel[node.level] || {};\n                getColorByPoint = point && level.colorByPoint;\n                if (getColorByPoint) {\n                    colorIndexByPoint = point.index % (colors ?\n                        colors.length :\n                        chartOptionsChart.colorCount);\n                    colorByPoint = colors && colors[colorIndexByPoint];\n                }\n                // Select either point color, level color or inherited color.\n                if (!series.chart.styledMode) {\n                    color = pick(point && point.options.color, level && level.color, colorByPoint, parentColor && variateColor(parentColor), series.color);\n                }\n                colorIndex = pick(point && point.options.colorIndex, level && level.colorIndex, colorIndexByPoint, parentColorIndex, options.colorIndex);\n            }\n            return {\n                color: color,\n                colorIndex: colorIndex\n            };\n        }\n        /**\n         * Creates a map from level number to its given options.\n         *\n         * @private\n         *\n         * @param {Object} params\n         * Object containing parameters.\n         * - `defaults` Object containing default options. The default options are\n         *   merged with the userOptions to get the final options for a specific\n         *   level.\n         * - `from` The lowest level number.\n         * - `levels` User options from series.levels.\n         * - `to` The highest level number.\n         *\n         * @return {Highcharts.Dictionary<object>|null}\n         * Returns a map from level number to its given options.\n         */\n        function getLevelOptions(params) {\n            let result = {}, defaults, converted, i, from, to, levels;\n            if (isObject(params)) {\n                from = isNumber(params.from) ? params.from : 1;\n                levels = params.levels;\n                converted = {};\n                defaults = isObject(params.defaults) ? params.defaults : {};\n                if (isArray(levels)) {\n                    converted = levels.reduce((obj, item) => {\n                        let level, levelIsConstant, options;\n                        if (isObject(item) && isNumber(item.level)) {\n                            options = merge({}, item);\n                            levelIsConstant = pick(options.levelIsConstant, defaults.levelIsConstant);\n                            // Delete redundant properties.\n                            delete options.levelIsConstant;\n                            delete options.level;\n                            // Calculate which level these options apply to.\n                            level = item.level + (levelIsConstant ? 0 : from - 1);\n                            if (isObject(obj[level])) {\n                                merge(true, obj[level], options); // #16329\n                            }\n                            else {\n                                obj[level] = options;\n                            }\n                        }\n                        return obj;\n                    }, {});\n                }\n                to = isNumber(params.to) ? params.to : 1;\n                for (i = 0; i <= to; i++) {\n                    result[i] = merge({}, defaults, isObject(converted[i]) ? converted[i] : {});\n                }\n            }\n            return result;\n        }\n        /**\n         * @private\n         * @todo Combine buildTree and buildNode with setTreeValues\n         * @todo Remove logic from Treemap and make it utilize this mixin.\n         */\n        function setTreeValues(tree, options) {\n            const before = options.before, idRoot = options.idRoot, mapIdToNode = options.mapIdToNode, nodeRoot = mapIdToNode[idRoot], levelIsConstant = (options.levelIsConstant !== false), points = options.points, point = points[tree.i], optionsPoint = point && point.options || {}, children = [];\n            let childrenTotal = 0;\n            tree.levelDynamic = tree.level - (levelIsConstant ? 0 : nodeRoot.level);\n            tree.name = pick(point && point.name, '');\n            tree.visible = (idRoot === tree.id ||\n                options.visible === true);\n            if (typeof before === 'function') {\n                tree = before(tree, options);\n            }\n            // First give the children some values\n            tree.children.forEach((child, i) => {\n                const newOptions = extend({}, options);\n                extend(newOptions, {\n                    index: i,\n                    siblings: tree.children.length,\n                    visible: tree.visible\n                });\n                child = setTreeValues(child, newOptions);\n                children.push(child);\n                if (child.visible) {\n                    childrenTotal += child.val;\n                }\n            });\n            // Set the values\n            const value = pick(optionsPoint.value, childrenTotal);\n            tree.visible = value >= 0 && (childrenTotal > 0 || tree.visible);\n            tree.children = children;\n            tree.childrenTotal = childrenTotal;\n            tree.isLeaf = tree.visible && !childrenTotal;\n            tree.val = value;\n            return tree;\n        }\n        /**\n         * Update the rootId property on the series. Also makes sure that it is\n         * accessible to exporting.\n         *\n         * @private\n         *\n         * @param {Object} series\n         * The series to operate on.\n         *\n         * @return {string}\n         * Returns the resulting rootId after update.\n         */\n        function updateRootId(series) {\n            let rootId, options;\n            if (isObject(series)) {\n                // Get the series options.\n                options = isObject(series.options) ? series.options : {};\n                // Calculate the rootId.\n                rootId = pick(series.rootNode, options.rootId, '');\n                // Set rootId on series.userOptions to pick it up in exporting.\n                if (isObject(series.userOptions)) {\n                    series.userOptions.rootId = rootId;\n                }\n                // Set rootId on series to pick it up on next update.\n                series.rootNode = rootId;\n            }\n            return rootId;\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        const TreeUtilities = {\n            getColor,\n            getLevelOptions,\n            setTreeValues,\n            updateRootId\n        };\n\n        return TreeUtilities;\n    });\n    _registerModule(_modules, 'Series/Sankey/SankeySeries.js', [_modules['Core/Globals.js'], _modules['Series/NodesComposition.js'], _modules['Series/Sankey/SankeyPoint.js'], _modules['Series/Sankey/SankeySeriesDefaults.js'], _modules['Core/Series/SeriesRegistry.js'], _modules['Series/Sankey/SankeyColumnComposition.js'], _modules['Core/Color/Color.js'], _modules['Series/TreeUtilities.js'], _modules['Core/Utilities.js']], function (H, NodesComposition, SankeyPoint, SankeySeriesDefaults, SeriesRegistry, SankeyColumnComposition, Color, TU, U) {\n        /* *\n         *\n         *  Sankey diagram module\n         *\n         *  (c) 2010-2021 Torstein Honsi\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { column: ColumnSeries, line: LineSeries } = SeriesRegistry.seriesTypes;\n        const { parse: color } = Color;\n        const { getLevelOptions } = TU;\n        const { clamp, extend, isObject, merge, pick, relativeLength, stableSort } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * @private\n         * @class\n         * @name Highcharts.seriesTypes.sankey\n         *\n         * @augments Highcharts.Series\n         */\n        class SankeySeries extends ColumnSeries {\n            constructor() {\n                /* *\n                 *\n                 *  Static Properties\n                 *\n                 * */\n                super(...arguments);\n                /* *\n                 *\n                 *  Properties\n                 *\n                 * */\n                this.colDistance = void 0;\n                this.data = void 0;\n                this.group = void 0;\n                this.nodeLookup = void 0;\n                this.nodePadding = void 0;\n                this.nodes = void 0;\n                this.nodeWidth = void 0;\n                this.options = void 0;\n                this.points = void 0;\n                this.translationFactor = void 0;\n            }\n            /* *\n             *\n             *  Static Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            static getDLOptions(params) {\n                const optionsPoint = (isObject(params.optionsPoint) ?\n                    params.optionsPoint.dataLabels :\n                    {}), optionsLevel = (isObject(params.level) ?\n                    params.level.dataLabels :\n                    {}), options = merge({\n                    style: {}\n                }, optionsLevel, optionsPoint);\n                return options;\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Create node columns by analyzing the nodes and the relations between\n             * incoming and outgoing links.\n             * @private\n             */\n            createNodeColumns() {\n                const columns = [];\n                for (const node of this.nodes) {\n                    node.setNodeColumn();\n                    if (!columns[node.column]) {\n                        columns[node.column] =\n                            SankeyColumnComposition.compose([], this);\n                    }\n                    columns[node.column].push(node);\n                }\n                // Fill in empty columns (#8865)\n                for (let i = 0; i < columns.length; i++) {\n                    if (typeof columns[i] === 'undefined') {\n                        columns[i] =\n                            SankeyColumnComposition.compose([], this);\n                    }\n                }\n                return columns;\n            }\n            /**\n             * Order the nodes, starting with the root node(s). (#9818)\n             * @private\n             */\n            order(node, level) {\n                const series = this;\n                // Prevents circular recursion:\n                if (typeof node.level === 'undefined') {\n                    node.level = level;\n                    for (const link of node.linksFrom) {\n                        if (link.toNode) {\n                            series.order(link.toNode, level + 1);\n                        }\n                    }\n                }\n            }\n            /**\n             * Extend generatePoints by adding the nodes, which are Point objects\n             * but pushed to the this.nodes array.\n             * @private\n             */\n            generatePoints() {\n                NodesComposition.generatePoints.apply(this, arguments);\n                if (this.orderNodes) {\n                    for (const node of this.nodes) {\n                        // Identify the root node(s)\n                        if (node.linksTo.length === 0) {\n                            // Start by the root node(s) and recursively set the level\n                            // on all following nodes.\n                            this.order(node, 0);\n                        }\n                    }\n                    stableSort(this.nodes, (a, b) => (a.level - b.level));\n                }\n            }\n            /**\n             * Overridable function to get node padding, overridden in dependency\n             * wheel series type.\n             * @private\n             */\n            getNodePadding() {\n                let nodePadding = this.options.nodePadding || 0;\n                // If the number of columns is so great that they will overflow with\n                // the given nodePadding, we sacrifice the padding in order to\n                // render all nodes within the plot area (#11917).\n                if (this.nodeColumns) {\n                    const maxLength = this.nodeColumns.reduce((acc, col) => Math.max(acc, col.length), 0);\n                    if (maxLength * nodePadding > this.chart.plotSizeY) {\n                        nodePadding = this.chart.plotSizeY / maxLength;\n                    }\n                }\n                return nodePadding;\n            }\n            /**\n             * Define hasData function for non-cartesian series.\n             * @private\n             * @return {boolean}\n             *         Returns true if the series has points at all.\n             */\n            hasData() {\n                return !!this.processedXData.length; // != 0\n            }\n            /**\n             * Return the presentational attributes.\n             * @private\n             */\n            pointAttribs(point, state) {\n                if (!point) {\n                    return {};\n                }\n                const series = this, level = point.isNode ? point.level : point.fromNode.level, levelOptions = series.mapOptionsToLevel[level || 0] || {}, options = point.options, stateOptions = (levelOptions.states && levelOptions.states[state || '']) || {}, values = [\n                    'colorByPoint',\n                    'borderColor',\n                    'borderWidth',\n                    'linkOpacity',\n                    'opacity'\n                ].reduce((obj, key) => {\n                    obj[key] = pick(stateOptions[key], options[key], levelOptions[key], series.options[key]);\n                    return obj;\n                }, {}), color = pick(stateOptions.color, options.color, values.colorByPoint ? point.color : levelOptions.color);\n                // Node attributes\n                if (point.isNode) {\n                    return {\n                        fill: color,\n                        stroke: values.borderColor,\n                        'stroke-width': values.borderWidth,\n                        opacity: values.opacity\n                    };\n                }\n                // Link attributes\n                return {\n                    fill: Color.parse(color).setOpacity(values.linkOpacity).get()\n                };\n            }\n            drawTracker() {\n                ColumnSeries.prototype.drawTracker.call(this, this.points);\n                ColumnSeries.prototype.drawTracker.call(this, this.nodes);\n            }\n            drawPoints() {\n                ColumnSeries.prototype.drawPoints.call(this, this.points);\n                ColumnSeries.prototype.drawPoints.call(this, this.nodes);\n            }\n            drawDataLabels() {\n                ColumnSeries.prototype.drawDataLabels.call(this, this.points);\n                ColumnSeries.prototype.drawDataLabels.call(this, this.nodes);\n            }\n            /**\n             * Run pre-translation by generating the nodeColumns.\n             * @private\n             */\n            translate() {\n                if (!this.processedXData) {\n                    this.processData();\n                }\n                this.generatePoints();\n                this.nodeColumns = this.createNodeColumns();\n                this.nodeWidth = relativeLength(this.options.nodeWidth, this.chart.plotSizeX);\n                const series = this, chart = this.chart, options = this.options, nodeWidth = this.nodeWidth, nodeColumns = this.nodeColumns;\n                this.nodePadding = this.getNodePadding();\n                // Find out how much space is needed. Base it on the translation\n                // factor of the most spaceous column.\n                this.translationFactor = nodeColumns.reduce((translationFactor, column) => Math.min(translationFactor, column.sankeyColumn.getTranslationFactor(series)), Infinity);\n                this.colDistance =\n                    (chart.plotSizeX - nodeWidth -\n                        options.borderWidth) / Math.max(1, nodeColumns.length - 1);\n                // Calculate level options used in sankey and organization\n                series.mapOptionsToLevel = getLevelOptions({\n                    // NOTE: if support for allowTraversingTree is added, then from\n                    // should be the level of the root node.\n                    from: 1,\n                    levels: options.levels,\n                    to: nodeColumns.length - 1,\n                    defaults: {\n                        borderColor: options.borderColor,\n                        borderRadius: options.borderRadius,\n                        borderWidth: options.borderWidth,\n                        color: series.color,\n                        colorByPoint: options.colorByPoint,\n                        // NOTE: if support for allowTraversingTree is added, then\n                        // levelIsConstant should be optional.\n                        levelIsConstant: true,\n                        linkColor: options.linkColor,\n                        linkLineWidth: options.linkLineWidth,\n                        linkOpacity: options.linkOpacity,\n                        states: options.states\n                    }\n                });\n                // First translate all nodes so we can use them when drawing links\n                for (const column of nodeColumns) {\n                    for (const node of column) {\n                        series.translateNode(node, column);\n                    }\n                }\n                // Then translate links\n                for (const node of this.nodes) {\n                    // Translate the links from this node\n                    for (const linkPoint of node.linksFrom) {\n                        // If weight is 0 - don't render the link path #12453,\n                        // render null points (for organization chart)\n                        if ((linkPoint.weight || linkPoint.isNull) && linkPoint.to) {\n                            series.translateLink(linkPoint);\n                            linkPoint.allowShadow = false;\n                        }\n                    }\n                }\n            }\n            /**\n             * Run translation operations for one link.\n             * @private\n             */\n            translateLink(point) {\n                const getY = (node, fromOrTo) => {\n                    const linkTop = (node.offset(point, fromOrTo) *\n                        translationFactor);\n                    const y = Math.min(node.nodeY + linkTop, \n                    // Prevent links from spilling below the node (#12014)\n                    node.nodeY + (node.shapeArgs && node.shapeArgs.height || 0) - linkHeight);\n                    return y;\n                };\n                const fromNode = point.fromNode, toNode = point.toNode, chart = this.chart, { inverted } = chart, translationFactor = this.translationFactor, options = this.options, linkColorMode = pick(point.linkColorMode, options.linkColorMode), curvy = ((chart.inverted ? -this.colDistance : this.colDistance) *\n                    options.curveFactor), nodeLeft = fromNode.nodeX, right = toNode.nodeX, outgoing = point.outgoing;\n                let linkHeight = Math.max(point.weight * translationFactor, this.options.minLinkWidth), fromY = getY(fromNode, 'linksFrom'), toY = getY(toNode, 'linksTo'), nodeW = this.nodeWidth, straight = right > nodeLeft + nodeW;\n                if (chart.inverted) {\n                    fromY = chart.plotSizeY - fromY;\n                    toY = (chart.plotSizeY || 0) - toY;\n                    nodeW = -nodeW;\n                    linkHeight = -linkHeight;\n                    straight = nodeLeft > right;\n                }\n                point.shapeType = 'path';\n                point.linkBase = [\n                    fromY,\n                    fromY + linkHeight,\n                    toY,\n                    toY + linkHeight\n                ];\n                // Links going from left to right\n                if (straight && typeof toY === 'number') {\n                    point.shapeArgs = {\n                        d: [\n                            ['M', nodeLeft + nodeW, fromY],\n                            [\n                                'C',\n                                nodeLeft + nodeW + curvy,\n                                fromY,\n                                right - curvy,\n                                toY,\n                                right,\n                                toY\n                            ],\n                            ['L', right + (outgoing ? nodeW : 0), toY + linkHeight / 2],\n                            ['L', right, toY + linkHeight],\n                            [\n                                'C',\n                                right - curvy,\n                                toY + linkHeight,\n                                nodeLeft + nodeW + curvy,\n                                fromY + linkHeight,\n                                nodeLeft + nodeW, fromY + linkHeight\n                            ],\n                            ['Z']\n                        ]\n                    };\n                    // Experimental: Circular links pointing backwards. In\n                    // v6.1.0 this breaks the rendering completely, so even\n                    // this experimental rendering is an improvement. #8218.\n                    // @todo\n                    // - Make room for the link in the layout\n                    // - Automatically determine if the link should go up or\n                    //   down.\n                }\n                else if (typeof toY === 'number') {\n                    const bend = 20, vDist = chart.plotHeight - fromY - linkHeight, x1 = right - bend - linkHeight, x2 = right - bend, x3 = right, x4 = nodeLeft + nodeW, x5 = x4 + bend, x6 = x5 + linkHeight, fy1 = fromY, fy2 = fromY + linkHeight, fy3 = fy2 + bend, y4 = fy3 + vDist, y5 = y4 + bend, y6 = y5 + linkHeight, ty1 = toY, ty2 = ty1 + linkHeight, ty3 = ty2 + bend, cfy1 = fy2 - linkHeight * 0.7, cy2 = y5 + linkHeight * 0.7, cty1 = ty2 - linkHeight * 0.7, cx1 = x3 - linkHeight * 0.7, cx2 = x4 + linkHeight * 0.7;\n                    point.shapeArgs = {\n                        d: [\n                            ['M', x4, fy1],\n                            ['C', cx2, fy1, x6, cfy1, x6, fy3],\n                            ['L', x6, y4],\n                            ['C', x6, cy2, cx2, y6, x4, y6],\n                            ['L', x3, y6],\n                            ['C', cx1, y6, x1, cy2, x1, y4],\n                            ['L', x1, ty3],\n                            ['C', x1, cty1, cx1, ty1, x3, ty1],\n                            ['L', x3, ty2],\n                            ['C', x2, ty2, x2, ty2, x2, ty3],\n                            ['L', x2, y4],\n                            ['C', x2, y5, x2, y5, x3, y5],\n                            ['L', x4, y5],\n                            ['C', x5, y5, x5, y5, x5, y4],\n                            ['L', x5, fy3],\n                            ['C', x5, fy2, x5, fy2, x4, fy2],\n                            ['Z']\n                        ]\n                    };\n                }\n                // Place data labels in the middle\n                point.dlBox = {\n                    x: nodeLeft + (right - nodeLeft + nodeW) / 2,\n                    y: fromY + (toY - fromY) / 2,\n                    height: linkHeight,\n                    width: 0\n                };\n                // And set the tooltip anchor in the middle\n                point.tooltipPos = chart.inverted ? [\n                    chart.plotSizeY - point.dlBox.y - linkHeight / 2,\n                    chart.plotSizeX - point.dlBox.x\n                ] : [\n                    point.dlBox.x,\n                    point.dlBox.y + linkHeight / 2\n                ];\n                // Pass test in drawPoints. plotX/Y needs to be defined for dataLabels.\n                // #15863\n                point.y = point.plotY = 1;\n                point.x = point.plotX = 1;\n                if (!point.options.color) {\n                    if (linkColorMode === 'from') {\n                        point.color = fromNode.color;\n                    }\n                    else if (linkColorMode === 'to') {\n                        point.color = toNode.color;\n                    }\n                    else if (linkColorMode === 'gradient') {\n                        const fromColor = color(fromNode.color).get(), toColor = color(toNode.color).get();\n                        point.color = {\n                            linearGradient: {\n                                x1: 1,\n                                x2: 0,\n                                y1: 0,\n                                y2: 0\n                            },\n                            stops: [\n                                [0, inverted ? fromColor : toColor],\n                                [1, inverted ? toColor : fromColor]\n                            ]\n                        };\n                    }\n                }\n            }\n            /**\n             * Run translation operations for one node.\n             * @private\n             */\n            translateNode(node, column) {\n                const translationFactor = this.translationFactor, chart = this.chart, options = this.options, { borderRadius, borderWidth = 0 } = options, sum = node.getSum(), nodeHeight = Math.max(Math.round(sum * translationFactor), this.options.minLinkWidth), nodeWidth = Math.round(this.nodeWidth), crisp = Math.round(borderWidth) % 2 / 2, nodeOffset = column.sankeyColumn.offset(node, translationFactor), fromNodeTop = Math.floor(pick(nodeOffset.absoluteTop, (column.sankeyColumn.top(translationFactor) +\n                    nodeOffset.relativeTop))) + crisp, left = Math.floor(this.colDistance * node.column +\n                    borderWidth / 2) + relativeLength(node.options[chart.inverted ?\n                    'offsetVertical' :\n                    'offsetHorizontal'] || 0, nodeWidth) +\n                    crisp, nodeLeft = chart.inverted ?\n                    chart.plotSizeX - left :\n                    left;\n                node.sum = sum;\n                // If node sum is 0, don't render the rect #12453\n                if (sum) {\n                    // Draw the node\n                    node.shapeType = 'roundedRect';\n                    node.nodeX = nodeLeft;\n                    node.nodeY = fromNodeTop;\n                    let x = nodeLeft, y = fromNodeTop, width = node.options.width || options.width || nodeWidth, height = node.options.height || options.height || nodeHeight;\n                    // Border radius should not greater than half the height of the node\n                    // #18956\n                    const r = clamp(relativeLength((typeof borderRadius === 'object' ?\n                        borderRadius.radius :\n                        borderRadius || 0), width), 0, nodeHeight / 2);\n                    if (chart.inverted) {\n                        x = nodeLeft - nodeWidth;\n                        y = chart.plotSizeY - fromNodeTop - nodeHeight;\n                        width = node.options.height || options.height || nodeWidth;\n                        height = node.options.width || options.width || nodeHeight;\n                    }\n                    // Calculate data label options for the point\n                    node.dlOptions = SankeySeries.getDLOptions({\n                        level: this.mapOptionsToLevel[node.level],\n                        optionsPoint: node.options\n                    });\n                    // Pass test in drawPoints\n                    node.plotX = 1;\n                    node.plotY = 1;\n                    // Set the anchor position for tooltips\n                    node.tooltipPos = chart.inverted ? [\n                        chart.plotSizeY - y - height / 2,\n                        chart.plotSizeX - x - width / 2\n                    ] : [\n                        x + width / 2,\n                        y + height / 2\n                    ];\n                    node.shapeArgs = {\n                        x,\n                        y,\n                        width,\n                        height,\n                        r,\n                        display: node.hasShape() ? '' : 'none'\n                    };\n                }\n                else {\n                    node.dlOptions = {\n                        enabled: false\n                    };\n                }\n            }\n        }\n        SankeySeries.defaultOptions = merge(ColumnSeries.defaultOptions, SankeySeriesDefaults);\n        NodesComposition.compose(SankeyPoint, SankeySeries);\n        extend(SankeySeries.prototype, {\n            animate: LineSeries.prototype.animate,\n            // Create a single node that holds information on incoming and outgoing\n            // links.\n            createNode: NodesComposition.createNode,\n            forceDL: true,\n            invertible: true,\n            isCartesian: false,\n            orderNodes: true,\n            noSharedTooltip: true,\n            pointArrayMap: ['from', 'to', 'weight'],\n            pointClass: SankeyPoint,\n            searchPoint: H.noop\n        });\n        SeriesRegistry.registerSeriesType('sankey', SankeySeries);\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        /* *\n         *\n         *  API Declarations\n         *\n         * */\n        /**\n         * A node in a sankey diagram.\n         *\n         * @interface Highcharts.SankeyNodeObject\n         * @extends Highcharts.Point\n         * @product highcharts\n         */ /**\n        * The color of the auto generated node.\n        *\n        * @name Highcharts.SankeyNodeObject#color\n        * @type {Highcharts.ColorString|Highcharts.GradientColorObject|Highcharts.PatternObject}\n        */ /**\n        * The color index of the auto generated node, especially for use in styled\n        * mode.\n        *\n        * @name Highcharts.SankeyNodeObject#colorIndex\n        * @type {number}\n        */ /**\n        * An optional column index of where to place the node. The default behaviour is\n        * to place it next to the preceding node.\n        *\n        * @see {@link https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/plotoptions/sankey-node-column/|Highcharts-Demo:}\n        *      Specified node column\n        *\n        * @name Highcharts.SankeyNodeObject#column\n        * @type {number}\n        * @since 6.0.5\n        */ /**\n        * The id of the auto-generated node, refering to the `from` or `to` setting of\n        * the link.\n        *\n        * @name Highcharts.SankeyNodeObject#id\n        * @type {string}\n        */ /**\n        * The name to display for the node in data labels and tooltips. Use this when\n        * the name is different from the `id`. Where the id must be unique for each\n        * node, this is not necessary for the name.\n        *\n        * @see {@link https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/css/sankey/|Highcharts-Demo:}\n        *         Sankey diagram with node options\n        *\n        * @name Highcharts.SankeyNodeObject#name\n        * @type {string}\n        * @product highcharts\n        */ /**\n        * This option is deprecated, use\n        * {@link Highcharts.SankeyNodeObject#offsetHorizontal} and\n        * {@link Highcharts.SankeyNodeObject#offsetVertical} instead.\n        *\n        * The vertical offset of a node in terms of weight. Positive values shift the\n        * node downwards, negative shift it upwards.\n        *\n        * If a percantage string is given, the node is offset by the percentage of the\n        * node size plus `nodePadding`.\n        *\n        * @see {@link https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/plotoptions/sankey-node-column/|Highcharts-Demo:}\n        *         Specified node offset\n        *\n        * @deprecated\n        * @name Highcharts.SankeyNodeObject#offset\n        * @type {number|string}\n        * @default 0\n        * @since 6.0.5\n        */ /**\n        * The horizontal offset of a node. Positive values shift the node right,\n        * negative shift it left.\n        *\n        * If a percantage string is given, the node is offset by the percentage of the\n        * node size.\n        *\n        * @see {@link https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/plotoptions/sankey-node-column/|Highcharts-Demo:}\n        *         Specified node offset\n        *\n        * @name Highcharts.SankeyNodeObject#offsetHorizontal\n        * @type {number|string}\n        * @since 9.3.0\n        */ /**\n        * The vertical offset of a node. Positive values shift the node down,\n        * negative shift it up.\n        *\n        * If a percantage string is given, the node is offset by the percentage of the\n        * node size.\n        *\n        * @see {@link https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/plotoptions/sankey-node-column/|Highcharts-Demo:}\n        *         Specified node offset\n        *\n        * @name Highcharts.SankeyNodeObject#offsetVertical\n        * @type {number|string}\n        * @since 9.3.0\n        */\n        /**\n         * Formatter callback function.\n         *\n         * @callback Highcharts.SeriesSankeyDataLabelsFormatterCallbackFunction\n         *\n         * @param {Highcharts.SeriesSankeyDataLabelsFormatterContextObject|Highcharts.PointLabelObject} this\n         *        Data label context to format\n         *\n         * @return {string|undefined}\n         *         Formatted data label text\n         */\n        /**\n         * Context for the node formatter function.\n         *\n         * @interface Highcharts.SeriesSankeyDataLabelsFormatterContextObject\n         * @extends Highcharts.PointLabelObject\n         */ /**\n        * The node object. The node name, if defined, is available through\n        * `this.point.name`.\n        * @name Highcharts.SeriesSankeyDataLabelsFormatterContextObject#point\n        * @type {Highcharts.SankeyNodeObject}\n        */\n        ''; // detach doclets above\n\n        return SankeySeries;\n    });\n    _registerModule(_modules, 'masters/modules/sankey.src.js', [], function () {\n\n\n    });\n}));"],"names":["factory","module","exports","define","amd","Highcharts","undefined","_modules","_registerModule","obj","path","args","fn","hasOwnProperty","apply","CustomEvent","window","dispatchEvent","detail","SeriesRegistry","U","NodesComposition","series","prototype","seriesProto","pointClass","pointProto","defined","extend","find","merge","pick","composedMembers","destroy","data","concat","points","nodes","arguments","setData","forEach","node","length","setNodeState","state","others","isNode","linksTo","linksFrom","fromNode","toNode","linkOrNode","setState","graphic","updateNode","options","redraw","animation","runEvent","dataLength","linkConfig","index","update","call","nodeIndex","reduce","prevIndex","n","id","nodeConfig","push","chart","compose","PointClass","SeriesClass","pushUnique","createNode","findById","newNode","init","className","y","getSum","sumTo","sumFrom","link","weight","Math","max","offset","point","coll","i","hasShape","outgoing","formatPrefix","name","mass","marker","radius","generatePoints","nodeLookup","colorCounter","level","from","styledMode","colorIndex","color","to","Point","column","ColumnSeries","seriesTypes","SankeyPoint","constructor","linkBase","linkColorMode","nodeX","nodeY","applyOptions","x","getClassName","getFromNode","fromColumn","setNodeColumn","isValid","borderWidth","colorByPoint","curveFactor","dataLabels","enabled","backgroundColor","crop","nodeFormat","nodeFormatter","format","formatter","inside","inactiveOtherPoints","linkOpacity","opacity","minLinkWidth","nodeAlignment","nodeWidth","nodePadding","showInLegend","states","hover","inactive","duration","tooltip","followPointer","headerFormat","pointFormat","SankeyColumnComposition","relativeLength","sankeyColumnArray","sankeyColumn","SankeyColumnAdditions","getTranslationFactor","slice","skipPoint","factor","remainingHeight","plotSizeY","sum","splice","top","height","nodeHeight","center","bottom","left","equalNodes","maxNodesLength","inverted","plotHeight","plotWidth","width","plotSizeX","round","totalNodeOffset","is","hangsFrom","absoluteTop","directionOffset","optionOffset","relativeTop","Color","isArray","isNumber","isObject","getColor","colorIndexByPoint","mapOptionsToLevel","parentColor","parentColorIndex","colors","siblings","chartOptionsChart","colorCount","variateColor","colorVariation","key","parse","brighten","get","getLevelOptions","params","result","defaults","converted","levels","item","levelIsConstant","setTreeValues","tree","before","idRoot","mapIdToNode","nodeRoot","optionsPoint","children","childrenTotal","levelDynamic","visible","child","newOptions","val","value","isLeaf","updateRootId","rootId","rootNode","userOptions","H","SankeySeriesDefaults","TU","line","LineSeries","clamp","stableSort","SankeySeries","colDistance","group","translationFactor","getDLOptions","optionsLevel","style","createNodeColumns","columns","order","orderNodes","a","b","getNodePadding","nodeColumns","maxLength","acc","col","hasData","processedXData","pointAttribs","levelOptions","stateOptions","values","fill","stroke","borderColor","setOpacity","drawTracker","drawPoints","drawDataLabels","translate","processData","min","Infinity","borderRadius","linkColor","linkLineWidth","translateNode","linkPoint","isNull","translateLink","allowShadow","getY","fromOrTo","linkTop","shapeArgs","linkHeight","curvy","nodeLeft","right","fromY","toY","nodeW","straight","shapeType","d","vDist","x1","x2","x4","x5","x6","fy1","fy2","fy3","y4","y5","y6","ty1","ty2","ty3","cfy1","cy2","cty1","cx1","x3","cx2","dlBox","tooltipPos","plotY","plotX","fromColor","toColor","linearGradient","y1","y2","stops","crisp","nodeOffset","fromNodeTop","floor","r","dlOptions","display","defaultOptions","animate","forceDL","invertible","isCartesian","noSharedTooltip","pointArrayMap","searchPoint","noop","registerSeriesType"],"mappings":"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"}